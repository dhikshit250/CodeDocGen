"use strict";(()=>{var e={};e.id=412,e.ids=[412],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},4074:e=>{e.exports=require("perf_hooks")},63477:e=>{e.exports=require("querystring")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},20492:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>L,originalPathname:()=>j,patchFetch:()=>q,requestAsyncStorage:()=>y,routeModule:()=>N,serverHooks:()=>A,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>x});var a={};r.r(a),r.d(a,{GET:()=>m,POST:()=>_});var n=r(95419),o=r(69108),s=r(99678),l=r(78070),d=r(47033),i=r(12030),u=r(12279),c=r(36462),p=r(3205),f=r(65256);let g=f.Ry({name:f.Z_().min(1,"Template name is required"),description:f.Z_().optional(),category:f.Z_().min(1,"Category is required"),language:f.Z_().optional(),difficulty:f.Km(["beginner","intermediate","advanced"]),prompt:f.Z_().min(1,"Prompt is required"),settings:f.Ry({includeTests:f.O7().default(!1),includeDiagrams:f.O7().default(!1),addComments:f.O7().default(!0)}).optional(),hasCode:f.O7().default(!0),hasDocs:f.O7().default(!0),isPublic:f.O7().default(!0)});async function m(e){try{let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1"),a=parseInt(t.get("limit")||"12"),n=t.get("search")||"",o=t.get("category")||"",s=t.get("difficulty")||"";t.get("language");let p=[(0,u.eq)(i.zd.isPublic,!0)];n&&p.push((0,u.o$)(i.zd.name,`%${n}%`)),o&&"All"!==o&&p.push((0,u.eq)(i.zd.category,o)),s&&"All"!==s&&p.push((0,u.eq)(i.zd.difficulty,s));let f=await d.db.select().from(i.zd).where((0,u.eq)(i.zd.isPublic,!0)).orderBy((0,c.C)(i.zd.downloads),(0,c.C)(i.zd.rating)).limit(a).offset((r-1)*a);return l.Z.json({templates:f,pagination:{page:r,limit:a,total:f.length}})}catch(e){return console.error("Get templates API error:",e),l.Z.json({error:"Internal server error"},{status:500})}}async function _(e){try{let t=await (0,p.I)();if(!t?.user?.id)return l.Z.json({error:"Unauthorized"},{status:401});let r=await e.json(),a=g.parse(r),n=await d.db.insert(i.zd).values({...a,createdBy:t.user.id}).returning();return l.Z.json({success:!0,template:n[0]})}catch(e){return console.error("Create template API error:",e),l.Z.json({error:"Failed to create template",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let N=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/templates/route",pathname:"/api/templates",filename:"route",bundlePath:"app/api/templates/route"},resolvedPagePath:"C:\\Users\\bunny\\CascadeProjects\\code-doc-gen\\app\\api\\templates\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:h,serverHooks:A,headerHooks:L,staticGenerationBailout:x}=N,j="/api/templates/route";function q(){return(0,s.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:h})}},4118:(e,t,r)=>{r.r(t),r.d(t,{GET:()=>d,POST:()=>d,authOptions:()=>l});var a=r(81355),n=r.n(a),o=r(10375),s=r(79390);let l={providers:[(0,o.Z)({clientId:process.env.GOOGLE_CLIENT_ID||"",clientSecret:process.env.GOOGLE_CLIENT_SECRET||""}),(0,s.Z)({clientId:process.env.DISCORD_CLIENT_ID||"",clientSecret:process.env.DISCORD_CLIENT_SECRET||""})],callbacks:{session:async({session:e,token:t})=>(e.user.id=t.sub,e)},secret:process.env.NEXTAUTH_SECRET,pages:{signIn:"/login"}},d=n()(l)},3205:(e,t,r)=>{r.d(t,{I:()=>o});var a=r(49605),n=r(4118);async function o(){return await (0,a.getServerSession)(n.authOptions)}},47033:(e,t,r)=>{r.d(t,{db:()=>l});var a=r(37939),n=r(25669);let o=process.env.DATABASE_URL;if(!o)throw Error("DATABASE_URL is not set");let s=(0,n.Z)(o),l=(0,a.t)(s)},12030:(e,t,r)=>{r.d(t,{QZ:()=>g,ed:()=>m,j_:()=>N,q:()=>f,zd:()=>_});var a=r(96155),n=r(49703),o=r(81930),s=r(82561),l=r(56664),d=r(6402),i=r(70573),u=r(75887),c=r(42310);let p=(0,a.af)("users",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),name:(0,o.L7)("name",{length:255}),email:(0,o.L7)("email",{length:255}).notNull().unique(),emailVerified:(0,s.AB)("email_verified"),image:(0,o.L7)("image",{length:255}),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull()});(0,a.af)("accounts",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),userId:(0,n.Vj)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),type:(0,o.L7)("type",{length:50}).notNull(),provider:(0,o.L7)("provider",{length:50}).notNull(),providerAccountId:(0,o.L7)("provider_account_id",{length:255}).notNull(),refresh_token:(0,l.fL)("refresh_token"),access_token:(0,l.fL)("access_token"),expires_at:(0,d._L)("expires_at"),token_type:(0,o.L7)("token_type",{length:50}),scope:(0,l.fL)("scope"),id_token:(0,l.fL)("id_token"),session_state:(0,l.fL)("session_state"),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull()}),(0,a.af)("sessions",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),sessionToken:(0,o.L7)("session_token",{length:255}).notNull().unique(),userId:(0,n.Vj)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),expires:(0,s.AB)("expires").notNull(),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull()});let f=(0,a.af)("projects",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),userId:(0,n.Vj)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),name:(0,o.L7)("name",{length:255}).notNull(),description:(0,l.fL)("description"),type:(0,o.L7)("type",{length:50}).notNull(),language:(0,o.L7)("language",{length:100}),framework:(0,o.L7)("framework",{length:100}),prompt:(0,l.fL)("prompt").notNull(),settings:(0,i.JB)("settings"),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull()}),g=(0,a.af)("files",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),projectId:(0,n.Vj)("project_id").notNull().references(()=>f.id,{onDelete:"cascade"}),name:(0,o.L7)("name",{length:255}).notNull(),path:(0,o.L7)("path",{length:500}).notNull(),type:(0,o.L7)("type",{length:50}).notNull(),language:(0,o.L7)("language",{length:100}),content:(0,l.fL)("content").notNull(),size:(0,d._L)("size").notNull(),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull()}),m=(0,a.af)("generations",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),userId:(0,n.Vj)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),projectId:(0,n.Vj)("project_id").references(()=>f.id,{onDelete:"cascade"}),prompt:(0,l.fL)("prompt").notNull(),type:(0,o.L7)("type",{length:50}).notNull(),settings:(0,i.JB)("settings"),status:(0,o.L7)("status",{length:50}).notNull().default("pending"),tokensUsed:(0,d._L)("tokens_used").default(0),cost:(0,d._L)("cost").default(0),error:(0,l.fL)("error"),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull(),completedAt:(0,s.AB)("completed_at")}),_=(0,a.af)("templates",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),name:(0,o.L7)("name",{length:255}).notNull(),description:(0,l.fL)("description"),category:(0,o.L7)("category",{length:100}).notNull(),language:(0,o.L7)("language",{length:100}),difficulty:(0,o.L7)("difficulty",{length:50}).notNull(),prompt:(0,l.fL)("prompt").notNull(),settings:(0,i.JB)("settings"),hasCode:(0,u.O7)("has_code").default(!0),hasDocs:(0,u.O7)("has_docs").default(!0),downloads:(0,d._L)("downloads").default(0),rating:(0,d._L)("rating").default(0),isPublic:(0,u.O7)("is_public").default(!0),isOfficial:(0,u.O7)("is_official").default(!1),createdBy:(0,n.Vj)("created_by").references(()=>p.id),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull()}),N=(0,a.af)("usage",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),userId:(0,n.Vj)("user_id").notNull().references(()=>p.id,{onDelete:"cascade"}),date:(0,s.AB)("date").notNull(),generations:(0,d._L)("generations").default(0),tokensUsed:(0,d._L)("tokens_used").default(0),cost:(0,d._L)("cost").default(0),createdAt:(0,s.AB)("created_at").defaultNow().notNull(),updatedAt:(0,s.AB)("updated_at").defaultNow().notNull()});(0,c.fC)(p),(0,c.IO)(p),(0,c.fC)(f),(0,c.IO)(f),(0,c.fC)(g),(0,c.IO)(g),(0,c.fC)(m),(0,c.IO)(m),(0,c.fC)(_),(0,c.IO)(_),(0,c.fC)(N),(0,c.IO)(N)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,206,721,279,754],()=>r(20492));module.exports=a})();